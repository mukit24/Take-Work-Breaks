<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productivity Timer - Focus Sessions & Reports | Take Work Breaks</title>
    <meta name="description"
        content="Boost productivity with Pomodoro, Deep Work, and custom timers. Track tasks, get daily reports, and take mindful breaks.">
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/productivity-timer.css">

    <!-- PDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>
    <div id="header-container"></div>

    <main class="productivity-app">
        <!-- Today's Overview Card (shown first if data exists) -->
        <div class="overview-card" id="overviewCard" hidden>
            <div class="overview-header">
                <h2>ğŸ“Š Today's Productivity</h2>
                <button id="clearTodayBtn" class="btn outline small">Clear Today's Data</button>
            </div>

            <div class="overview-stats" id="overviewStats">
                <!-- Stats will be populated by JS -->
            </div>

            <div class="overview-actions">
                <button id="generateReportBtn" class="btn primary">
                    <span class="btn-icon">ğŸ“„</span> Generate Today's Report
                </button>
                <button id="continueTimerBtn" class="btn outline">
                    <span class="btn-icon">â±ï¸</span> Start New Timer Session
                </button>
            </div>

            <p class="overview-note">Start a new timer session or generate a report of today's work.</p>
        </div>

        <!-- Step 1: Timer Type Selection -->
        <div class="timer-selector" id="timerSelector">
            <h2>Choose Your Timer Type</h2>
            <div class="timer-grid" id="timerGrid">
                <!-- Timer cards will be populated by JS -->
            </div>
        </div>

        <!-- Step 2: Timer Setup -->
        <div class="setup-interface" id="setupInterface" hidden>
            <div class="setup-header">
                <h2 id="setupTitle">Setup Your Timer</h2>
            </div>

            <div class="setup-form">
                <div class="input-group">
                    <div class="form-group">
                        <label for="sessionCount">
                            <span class="label-icon">ğŸ“Š</span>
                            Number of Sessions:
                        </label>
                        <div class="input-with-info">
                            <input type="number" id="sessionCount" min="1" max="10" value="4">
                            <span class="input-info">How many work sessions? (1-10)</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="autoCycle">
                            <span class="label-icon">ğŸ”„</span>
                            Auto-cycle Sessions:
                        </label>
                        <div class="toggle-with-info">
                            <div class="toggle-switch">
                                <input type="checkbox" id="autoCycle">
                                <span class="toggle-slider"></span>
                            </div>
                            <span class="toggle-info">Automatically start next session after break</span>
                        </div>
                    </div>
                </div>

                <div class="form-group custom-times" id="customTimesGroup" hidden>
                    <div class="time-inputs">
                        <div class="time-input">
                            <label for="workTime">
                                <span class="label-icon">ğŸ¯</span>
                                Work Time (minutes):
                            </label>
                            <input type="number" id="workTime" min="5" max="120" value="25">
                        </div>
                        <div class="time-input">
                            <label for="breakTime">
                                <span class="label-icon">â˜•</span>
                                Break Time (minutes):
                            </label>
                            <input type="number" id="breakTime" min="1" max="30" value="5">
                        </div>
                    </div>
                </div>

                <div class="sounds-section">
                    <h3>Sound Settings</h3>
                    <div class="sound-controls">
                        <div class="sound-control">
                            <label for="soundToggle">
                                <span class="label-icon">ğŸ”Š</span>
                                Enable Sounds:
                            </label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="soundToggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>

                        <div class="volume-control" id="volumeControl">
                            <label for="volumeSlider">Volume:</label>
                            <input type="range" id="volumeSlider" min="0" max="100" value="50" class="volume-slider">
                            <span id="volumeValue">50%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="setup-actions">
                <button id="startSessionBtn" class="btn primary">
                    <span class="btn-icon">ğŸš€</span>
                    Start Timer Session
                </button>
                <button id="backToSelection" class="btn outline">â† Back to Selection</button>
            </div>
        </div>

        <!-- Step 3: Timer Running Interface -->
        <div class="running-interface" id="runningInterface" hidden>
            <div class="timer-header">
                <div class="session-info">
                    <span class="session-counter" id="sessionCounter">Session 1 of 4</span>
                    <span class="timer-type-badge" id="runningTimerType">ğŸ… Pomodoro</span>
                </div>

                <div class="phase-indicator">
                    <span class="phase-icon" id="phaseIcon">ğŸ¯</span>
                    <span class="phase-text" id="phaseText">WORK TIME</span>
                </div>
            </div>

            <div class="timer-display-section">
                <div class="timer-circle" id="timerCircle">
                    <div class="timer-time" id="timerTime">25:00</div>
                    <div class="timer-label" id="timerLabel">Focus Time</div>
                </div>

                <div class="current-task-section">
                    <input type="text" id="currentTaskInput"
                        placeholder="What are you working on this session? (Optional)" maxlength="100">
                    <button id="saveTaskBtn" class="btn small">Save Task</button>
                </div>
            </div>

            <div class="timer-controls">
                <div class="control-buttons">
                    <button id="startPauseBtn" class="btn primary">
                        <span class="btn-icon" id="startPauseIcon">â–¶ï¸</span>
                        <span id="startPauseText">Start</span>
                    </button>
                    <button id="resetTimerBtn" class="btn outline">Reset</button>
                    <button id="skipPhaseBtn" class="btn secondary" disabled>Skip</button>
                </div>

                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-labels">
                        <span id="completedSessions">0 sessions done</span>
                        <span id="totalTimeToday">0 min today</span>
                    </div>
                </div>
            </div>

            <!-- Break Suggestions (optional) -->
            <div class="break-suggestions" id="breakSuggestions" hidden>
                <h3>ğŸ’¡ Break Activity Suggestions</h3>
                <div class="suggestions-grid" id="suggestionsGrid">
                    <!-- Suggestions will be populated by JS -->
                </div>
                <p class="suggestions-note">Take a mindful break to recharge. These activities are optional.</p>
            </div>

            <div class="running-actions">
                <button id="endSessionBtn" class="btn outline">End Timer Session</button>
                <button id="backToSetup" class="btn back-link">â† Back to Setup</button>
            </div>
        </div>

        <!-- Step 4: Session Complete -->
        <div class="complete-interface" id="completeInterface" hidden>
            <div class="complete-header">
                <div class="complete-icon" id="completeIcon">ğŸ¯</div>
                <h2 id="completeTitle">Session Complete!</h2>
                <p class="complete-subtitle" id="completeSubtitle">Great focus session completed</p>
            </div>

            <div class="session-summary">
                <div class="summary-card">
                    <h3>ğŸ“‹ Session Summary</h3>
                    <div class="summary-content" id="sessionSummary">
                        <!-- Summary will be populated by JS -->
                    </div>
                </div>

                <div class="next-action">
                    <h3>â­ï¸ What's Next?</h3>
                    <div class="action-buttons">
                        <button id="startNextSessionBtn" class="btn primary">
                            <span class="btn-icon">ğŸš€</span>
                            Start Next Session
                        </button>
                        <button id="takeBreakBtn" class="btn outline">
                            <span class="btn-icon">â˜•</span>
                            Start Break Now
                        </button>
                        <button id="endAllSessionsBtn" class="btn secondary">
                            <span class="btn-icon">ğŸ</span>
                            End All Sessions
                        </button>
                    </div>
                </div>
            </div>

            <div class="report-section">
                <h3>ğŸ“Š Generate Report</h3>
                <p>Create a report of today's productivity sessions.</p>
                <div class="report-actions">
                    <button id="generatePdfBtn" class="btn primary">
                        <span class="btn-icon">ğŸ“„</span>
                        Download PDF Report
                    </button>
                    <button id="generateImageBtn" class="btn outline">
                        <span class="btn-icon">ğŸ–¼ï¸</span>
                        Save as Image
                    </button>
                    <button id="copyReportBtn" class="btn secondary">
                        <span class="btn-icon">ğŸ“‹</span>
                        Copy to Clipboard
                    </button>
                </div>
            </div>
        </div>

        <!-- Report Generation Modal -->
        <div class="report-modal" id="reportModal" hidden>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ğŸ“„ Today's Productivity Report</h3>
                    <button id="closeModalBtn" class="modal-close">&times;</button>
                </div>
                <div class="modal-body" id="modalReportContent">
                    <!-- Report content will be populated by JS -->
                </div>
                <div class="modal-footer">
                    <p>Report will be generated based on this preview.</p>
                </div>
            </div>
        </div>
    </main>

    <script src="js/components.js"></script>
    <script src="js/productivity-timer.js"></script>
</body>

</html>